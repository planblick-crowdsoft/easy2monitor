version: '2.4'
services:
  easy2monitor.planblick.svc:
    build: .
    image: easy2monitor
    restart: always
    mem_limit: 400m
    environment:
      ENVIRONMENT: ${ENVIRONMENT}
      FLASK_DEBUG: ${FLASK_DEBUG}
      DB_DRIVER:  ${DB_DRIVER}
      DB_NAME:  ${DB_NAME}
      DB_DEBUG:  ${DB_DEBUG}
      MQ_HOST: rabbitmq.planblick.svc
      MQ_USERNAME: guest
      MQ_PASSWORD: guest
      MQ_PORT: 5672
      MQ_VHOST: /
      SMTP_HOST: ${SMTP_HOST}
      SMTP_PORT: ${SMTP_PORT}
      SMTP_LOGIN: ${SMTP_LOGIN}
      SMTP_PASSWORD: ${SMTP_PASSWORD}
      MAIL_SENDER: ${MAIL_SENDER}
      MAIL_RECIPIENT: ${MAIL_RECIPIENT}
      SEND_MAIL: ${SEND_MAIL}
    stdin_open: true
    tty: true
    ports:
    - "8000:8000"
    volumes:
    - ./src:/src

  rabbitmq.planblick.svc:
    image: "rabbitmq:3.6-management"
    ports:
      - 5672:5672
      - 15672:15672
